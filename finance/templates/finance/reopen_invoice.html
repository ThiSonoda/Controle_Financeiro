{% extends "finance/base.html" %}
{% load static %}

{% block content %}
<h1>Reabrir Fatura</h1>

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

<div style="max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background: white;">
  <h2>Fatura do Cartão: {{ card.name }}</h2>
  
  <div style="margin: 20px 0;">
    <p><strong>Período:</strong> {% if month < 10 %}0{% endif %}{{ month }}/{{ year }}</p>
    <p><strong>Total da Fatura:</strong> <span style="font-size: 24px; font-weight: bold; color: #283593;">R$ {{ total|floatformat:2 }}</span></p>
    <p><strong>Número de lançamentos:</strong> {{ transaction_count }}</p>
  </div>

  <div style="background: #bbdefb; padding: 15px; border-radius: 5px; margin: 20px 0; border: 1px solid #2196f3;">
    <p style="margin: 0; font-weight: 600;">ℹ️ Informação</p>
    <p style="margin: 5px 0 0 0;">Tem certeza que deseja reabrir esta fatura? Esta ação marcará todas as transações como não pagas, permitindo que você abra a fatura novamente.</p>
  </div>

  <form method="post" action="" style="margin-top: 20px;">
    {% csrf_token %}
    <div style="display: flex; gap: 10px;">
      <button type="submit" style="flex: 1; background: #ff9800; padding: 12px;">
        Sim, Reabrir Fatura
      </button>
      <a href="{% url 'finance:transactions' %}" style="flex: 1; text-align: center; padding: 12px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 5px; text-decoration: none; color: #333;">
        Cancelar
      </a>
    </div>
  </form>
</div>

{% endblock %}

